<!DOCTYPE html>
<html>
<head>
    <title>Room Information</title>
</head>
<body>
    <h2>Room Information</h2>

    <p>Occupied: {{ occupied_count }} / {{ total_rooms }}</p>

    <form method="POST" action="/room_info">
        <label>Room Number:</label>
        <input type="text" name="room_number" required>

        <label>Room Type:</label>
        <input type="text" name="room_type" required>

        <label>Price:</label>
        <input type="number" step="0.01" name="price" required>

        <label>Status:</label>
        <select name="status">
            <option value="Available">Available</option>
            <option value="Occupied">Occupied</option>
            <option value="Maintenance">Maintenance</option>
        </select>

        <button type="submit">Save Room</button>
    </form>

    {% if msg %}
    <p>{{ msg }}</p>
    {% endif %}

    <h3>Existing Rooms</h3>
    <table border="1" cellpadding="5" cellspacing="0">
        <tr>
            <th>ID</th>
            <th>Room Number</th>
            <th>Room Type</th>
            <th>Price</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>

        {% for room in rooms %}
        <tr>
            <td>{{ room[0] }}</td>
            <td>{{ room[1] }}</td>
            <td>{{ room[2] }}</td>
            <td>{{ room[3] }}</td>
            <td>{{ room[4] }}</td>
            <td>
                <!-- Delete -->
                <form method="POST" action="/room_info" style="display:inline;">
                    <input type="hidden" name="delete_id" value="{{ room[0] }}">
                    <button type="submit">Delete</button>
                </form>

                <!-- Maintenance -->
                <form method="POST" action="/room_info" style="display:inline;">
                    <input type="hidden" name="update_id" value="{{ room[0] }}">
                    <input type="hidden" name="new_status" value="Maintenance">
                    <button type="submit">Maintenance</button>
                </form>

                <!-- Done (make available) -->
                <form method="POST" action="/room_info" style="display:inline;">
                    <input type="hidden" name="update_id" value="{{ room[0] }}">
                    <input type="hidden" name="new_status" value="Available">
                    <button type="submit">Done</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

    <p><a href="{{ url_for('dashboard') }}">Back to Dashboard</a></p>
</body>
</html>
